input_boolean:
  minimote_camille_1:
    name: Minimote Camille Button 1 Pushed
    icon: mdi:radio_button_checked
  minimote_camille_2:
    name: Minimote Camille Button 1 Held
    icon: mdi:radio_button_checked
  minimote_camille_3:
    name: Minimote Camille Button 2 Pushed
    icon: mdi:radio_button_checked
  minimote_camille_4:
    name: Minimote Camille Button 2 Held
    icon: mdi:radio_button_checked
  minimote_camille_5:
    name: Minimote Camille Button 3 Pushed
    icon: mdi:radio_button_checked
  minimote_camille_6:
    name: Minimote Camille Button 3 Held
    icon: mdi:radio_button_checked
  minimote_camille_7:
    name: Minimote Camille Button 4 Pushed
    icon: mdi:radio_button_checked
  minimote_camille_8:
    name: Minimote Camille Button 4 Held
    icon: mdi:radio_button_checked

automation:
  - id: minimote_camille
    alias: Camille's Minimote Control
    trigger:
      - platform: event
        event_type: zwave.scene_activated
        event_data:
          entity_id:
            zwave.aeotec_dsa03202_minimote_4
    action:
      - service: homeassistant.toggle
        data_template:
          entity_id: >
            {% set map = {1: "input_boolean.minimote_camille_1",
                          2: "input_boolean.minimote_camille_2",
                          3: "input_boolean.minimote_camille_3",
                          4: "input_boolean.minimote_camille_2",
                          5: "input_boolean.minimote_camille_5",
                          6: "input_boolean.minimote_camille_2",
                          7: "input_boolean.minimote_camille_7",
                          8: "input_boolean.minimote_camille_2"} %}
            {{ map[trigger.event.data.scene_id|int] }}


  - alias: "Minimote Camille Push 1"
    trigger:
      - platform: state
        entity_id: input_boolean.minimote_camille_1
    action:
      - service: homeassistant.toggle
        data:
          entity_id: light.bedroom_canopy

  - alias: "Minimote Camille Hold"
    trigger:
      - platform: state
        entity_id:
          - input_boolean.minimote_camille_2
          - input_boolean.minimote_camille_4
          - input_boolean.minimote_camille_6
          - input_boolean.minimote_camille_8
    action:
      - service: homeassistant.toggle
        data_template:
          entity_id: >-
            {% if is_state("input_select.camille_status", "Asleep") %}
              {% set runScript = "script.goodmorning_camille" %}
            {% elif is_state("input_select.camille_status", "Awake") %}
                 {% set runScript = "script.goodnight_camille" %}
            {% else %}
                 {% set runScript = "automation.lights_camille_on" %}
            {% endif %}
            {{ runScript }}

  - alias: "Minimote Camille Push 2"
    trigger:
      - platform: state
        entity_id: input_boolean.minimote_camille_3
    action:
      - service: homeassistant.toggle
        data:
          entity_id: light.grandma_s_lamp
